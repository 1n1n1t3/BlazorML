<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>BlazorML</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/toxicity"></script>
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/site.css" rel="stylesheet" />
</head>
<body onload="setup()">
    <app>Loading...</app>
    <script>

        let model;
        let labels;
        async function setup() {
            const threshold = 0.65;

            model = await toxicity.load(threshold);
        }
        
        async function getSentiment(_text) {


            const predictions = await classify(_text);
            console.log(predictions);
            return predictions;
        }
        const classify = async (inputs) => {
            const results = await model.classify(inputs);

            var obj = "";
            results.forEach((classification) => {
            obj += classification.label +" - "+classification.results[0].match+";";
            });
            return obj;
            };
        </script>
    <script src="_framework/blazor.webassembly.js"></script>
</body>
</html>
